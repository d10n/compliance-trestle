
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for compliance-trestle package.">
      
      
      
        <link rel="canonical" href="https://ibm.github.io/compliance-trestle/api_reference/trestle.common.model_utils/">
      
      
        <link rel="prev" href="../trestle.common.log/">
      
      
        <link rel="next" href="../trestle.common.str_utils/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.0, mkdocs-material-9.3.2">
    
    
      
        <title>model_utils - Compliance Trestle</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.30068a00.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XT3KGMHSY8"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XT3KGMHSY8",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XT3KGMHSY8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trestle.common.model_utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Compliance Trestle" class="md-header__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Compliance Trestle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              model_utils
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../python_trestle_setup/" class="md-tabs__link">
        
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/trestle_sample_workflow/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mkdocs_code_of_conduct/" class="md-tabs__link">
          
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../errors/" class="md-tabs__link">
        
  
    
  
  Known limitations

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../demonstrations-content/" class="md-tabs__link">
        
  
    
  
  Demos

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../plugins/compliance-trestle-fedramp/" class="md-tabs__link">
          
  
  Plugins

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../license/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../reference/third-party-result-schema-SCC/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Compliance Trestle" class="md-nav__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Compliance Trestle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../python_trestle_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/trestle_sample_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro to trestle workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/continuous-compliance/continuous-compliance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compliance posture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Trestle Authoring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Trestle Authoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governance of Authored Documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ssp_profile_catalog_authoring/ssp_profile_catalog_authoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Catalog, Profile, ComponentDefinition, and SSP Authoring
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Trestle Transformers and Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Trestle Transformers and Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.transformer-construction/transformer-construction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformer construction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.csv-to-oscal-cd/transformation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task - task.csv-to-oscal-cd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-catalog/transformation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task - ocp4-cis-profile-to-oscal-catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-cd/transformation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task - ocp4-cis-profile-to-oscal-cd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.tanium-result-to-oscal-ar/transformation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task - tanium-result-to-oscal-ar
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Trestle command-line interface (CLI)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Trestle command-line interface (CLI)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI for OSCAL documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author_jinja/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI for Jinja Template processing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs_code_of_conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/mkdocs_contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/IBM/compliance-trestle/graphs/contributors" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../maintainers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintainers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/website/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation website
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/trestle_oscal_object_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trestle's object model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/DCO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer Certificate of Originality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trestle plugin mechanism
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known limitations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../demonstrations-content/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Demos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/compliance-trestle-fedramp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FedRAMP validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/third-party-result-schema-SCC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrating with IBM SCC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" checked>
        
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    trestle API reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            trestle API reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_2" checked>
        
          <label class="md-nav__link" for="__nav_9_2_2" id="__nav_9_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    common
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_2_2">
            <span class="md-nav__icon md-icon"></span>
            common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.common_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common_types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.const/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    const
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.err/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    err
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.file_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.list_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.load_validate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    load_validate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    model_utils
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    model_utils
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.common.model_utils" class="md-nav__link">
    model_utils
  </a>
  
    <nav class="md-nav" aria-label="model_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils" class="md-nav__link">
    ModelUtils
  </a>
  
    <nav class="md-nav" aria-label="ModelUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.dict_to_parameter" class="md-nav__link">
    dict_to_parameter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.fields_set_non_none" class="md-nav__link">
    fields_set_non_none()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.find_uuid_refs" class="md-nav__link">
    find_uuid_refs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.find_values_by_name" class="md-nav__link">
    find_values_by_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_all_models" class="md-nav__link">
    get_all_models()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_model_path_for_name_and_class" class="md-nav__link">
    get_model_path_for_name_and_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_models_of_type" class="md-nav__link">
    get_models_of_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_relative_model_type" class="md-nav__link">
    get_relative_model_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_root_model" class="md-nav__link">
    get_root_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_singular_alias" class="md-nav__link">
    get_singular_alias()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_stripped_model_type" class="md-nav__link">
    get_stripped_model_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_title_from_model_uri" class="md-nav__link">
    get_title_from_model_uri()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.has_no_duplicate_values_by_name" class="md-nav__link">
    has_no_duplicate_values_by_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.last_modified_at_time" class="md-nav__link">
    last_modified_at_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_distributed" class="md-nav__link">
    load_distributed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_model_for_class" class="md-nav__link">
    load_model_for_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_model_for_type" class="md-nav__link">
    load_model_for_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.model_age" class="md-nav__link">
    model_age()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.model_type_to_model_dir" class="md-nav__link">
    model_type_to_model_dir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.models_are_equivalent" class="md-nav__link">
    models_are_equivalent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.parameter_to_dict" class="md-nav__link">
    parameter_to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.regenerate_uuids" class="md-nav__link">
    regenerate_uuids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.save_top_level_model" class="md-nav__link">
    save_top_level_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.update_last_modified" class="md-nav__link">
    update_last_modified()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.str_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    str_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.trash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    trash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.type_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    type_utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3" >
        
          <label class="md-nav__link" for="__nav_9_2_3" id="__nav_9_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3">
            <span class="md-nav__icon md-icon"></span>
            core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.all_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    all_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base_model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_3" >
        
          <label class="md-nav__link" for="__nav_9_2_3_3" id="__nav_9_2_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    catalog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            catalog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_api
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_merger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_merger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_reader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_reader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_writer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5" >
        
          <label class="md-nav__link" for="__nav_9_2_3_5" id="__nav_9_2_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.add/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    add
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.assemble/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    assemble
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_3" >
        
          <label class="md-nav__link" for="__nav_9_2_3_5_3" id="__nav_9_2_3_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    author
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_2_3_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_5_3">
            <span class="md-nav__icon md-icon"></span>
            author
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    command
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.consts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    consts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.folders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    folders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.headers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    headers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.jinja/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jinja
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.ssp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ssp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_3_12" >
        
          <label class="md-nav__link" for="__nav_9_2_3_5_3_12" id="__nav_9_2_3_5_3_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    versioning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_9_2_3_5_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_5_3_12">
            <span class="md-nav__icon md-icon"></span>
            versioning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.versioning.template_versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    template_versioning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.command_docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    command_docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_5" >
        
          <label class="md-nav__link" for="__nav_9_2_3_5_5" id="__nav_9_2_3_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    common
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_2_3_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_5_5">
            <span class="md-nav__icon md-icon"></span>
            common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.cmd_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cmd_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.return_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    return_codes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.create/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    create
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.describe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    describe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.href/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    href
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.import_/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    import_
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.init/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.merge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    merge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.partial_object_validate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    partial_object_validate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.remove/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    remove
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.replicate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    replicate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.split/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    split
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.validate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    version
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_reader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_reader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_writer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.docs_control_writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docs_control_writer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.draw_io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    draw_io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.duplicates_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    duplicates_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generic_oscal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generic_oscal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.jinja/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jinja
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.links_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    links_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_17" >
        
          <label class="md-nav__link" for="__nav_9_2_3_17" id="__nav_9_2_3_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    markdown
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_17">
            <span class="md-nav__icon md-icon"></span>
            markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.base_markdown_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base_markdown_node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.control_markdown_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_markdown_node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.docs_markdown_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docs_markdown_node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown_api
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_const/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown_const
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_processor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown_processor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.md_writer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    md_writer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_18" >
        
          <label class="md-nav__link" for="__nav_9_2_3_18" id="__nav_9_2_3_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_18">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    elements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.file_content_type/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file_content_type
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.plans/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plans
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.object_factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_factory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    parser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pipeline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.profile_resolver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    profile_resolver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.refs_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    refs_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_24" >
        
          <label class="md-nav__link" for="__nav_9_2_3_24" id="__nav_9_2_3_24_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    remote
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_24">
            <span class="md-nav__icon md-icon"></span>
            remote
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.remote.cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cache
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_26" >
        
          <label class="md-nav__link" for="__nav_9_2_3_26" id="__nav_9_2_3_26_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    resolver
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_3_26">
            <span class="md-nav__icon md-icon"></span>
            resolver
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.merge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    merge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.modify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    modify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.prune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prune
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.rule_parameters_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rule_parameters_validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.ssp_io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ssp_io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.trestle_base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    trestle_base_model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator_factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validator_factory
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_4" >
        
          <label class="md-nav__link" for="__nav_9_2_4" id="__nav_9_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    oscal
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_4">
            <span class="md-nav__icon md-icon"></span>
            oscal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    assessment_plan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    assessment_results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.poam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    poam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.ssp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ssp
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_5" >
        
          <label class="md-nav__link" for="__nav_9_2_5" id="__nav_9_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_5">
            <span class="md-nav__icon md-icon"></span>
            tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.base_task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base_task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.cis_xlsx_to_oscal_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cis_xlsx_to_oscal_catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.csv_to_oscal_cd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csv_to_oscal_cd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ocp4_cis_profile_to_oscal_catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_cd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ocp4_cis_profile_to_oscal_cd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.oscal_catalog_to_csv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    oscal_catalog_to_csv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.oscal_profile_to_osco_profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    oscal_profile_to_osco_profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.osco_result_to_oscal_ar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osco_result_to_oscal_ar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.tanium_result_to_oscal_ar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tanium_result_to_oscal_ar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.transform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xccdf_result_to_oscal_ar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xccdf_result_to_oscal_ar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xlsx_helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_cd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xlsx_to_oscal_cd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xlsx_to_oscal_profile
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_6" >
        
          <label class="md-nav__link" for="__nav_9_2_6" id="__nav_9_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    transforms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_6">
            <span class="md-nav__icon md-icon"></span>
            transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_6_1" >
        
          <label class="md-nav__link" for="__nav_9_2_6_1" id="__nav_9_2_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    implementations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2_6_1">
            <span class="md-nav__icon md-icon"></span>
            implementations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.osco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osco
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.tanium/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tanium
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.xccdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xccdf
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transformer_factory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transformer_helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_singleton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transformer_singleton
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.common.model_utils" class="md-nav__link">
    model_utils
  </a>
  
    <nav class="md-nav" aria-label="model_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils" class="md-nav__link">
    ModelUtils
  </a>
  
    <nav class="md-nav" aria-label="ModelUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.dict_to_parameter" class="md-nav__link">
    dict_to_parameter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.fields_set_non_none" class="md-nav__link">
    fields_set_non_none()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.find_uuid_refs" class="md-nav__link">
    find_uuid_refs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.find_values_by_name" class="md-nav__link">
    find_values_by_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_all_models" class="md-nav__link">
    get_all_models()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_model_path_for_name_and_class" class="md-nav__link">
    get_model_path_for_name_and_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_models_of_type" class="md-nav__link">
    get_models_of_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_relative_model_type" class="md-nav__link">
    get_relative_model_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_root_model" class="md-nav__link">
    get_root_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_singular_alias" class="md-nav__link">
    get_singular_alias()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_stripped_model_type" class="md-nav__link">
    get_stripped_model_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.get_title_from_model_uri" class="md-nav__link">
    get_title_from_model_uri()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.has_no_duplicate_values_by_name" class="md-nav__link">
    has_no_duplicate_values_by_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.last_modified_at_time" class="md-nav__link">
    last_modified_at_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_distributed" class="md-nav__link">
    load_distributed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_model_for_class" class="md-nav__link">
    load_model_for_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.load_model_for_type" class="md-nav__link">
    load_model_for_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.model_age" class="md-nav__link">
    model_age()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.model_type_to_model_dir" class="md-nav__link">
    model_type_to_model_dir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.models_are_equivalent" class="md-nav__link">
    models_are_equivalent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.parameter_to_dict" class="md-nav__link">
    parameter_to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.regenerate_uuids" class="md-nav__link">
    regenerate_uuids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.save_top_level_model" class="md-nav__link">
    save_top_level_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.common.model_utils.ModelUtils.update_last_modified" class="md-nav__link">
    update_last_modified()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>model_utils</h1>

<div class="doc doc-object doc-module">



<h2 id="trestle.common.model_utils" class="doc doc-heading">
        <code>trestle.common.model_utils</code>



<a href="#trestle.common.model_utils" class="headerlink" title="Permanent link">¤</a></h2>

    <div class="doc doc-contents first">

      <p>Common utilities for the OSCAL models and directories.</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="trestle.common.model_utils.logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logger</span></code>


<a href="#trestle.common.model_utils.logger" class="headerlink" title="Permanent link">¤</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>


<h3 id="trestle.common.model_utils-classes">Classes<a href="#trestle.common.model_utils-classes" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-object doc-class">



<h4 id="trestle.common.model_utils.ModelUtils" class="doc doc-heading">
        <code>
ModelUtils        </code>



<a href="#trestle.common.model_utils.ModelUtils" class="headerlink" title="Permanent link">¤</a></h4>

    <div class="doc doc-contents ">

      <p>Utilities for the OSCAL models input and output.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ModelUtils</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Utilities for the OSCAL models input and output.&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_distributed</span><span class="p">(</span>
        <span class="n">abs_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">abs_trestle_root</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">collection_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span>
               <span class="nb">str</span><span class="p">,</span>
               <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OscalBaseModel</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given path to a model, load the model.</span>

<span class="sd">        If the model is decomposed/split/distributed,the decomposed models are loaded recursively.</span>

<span class="sd">        Args:</span>
<span class="sd">            abs_path: The path to the file/directory to be loaded.</span>
<span class="sd">            abs_trestle_root: The trestle workspace root directory.</span>
<span class="sd">            collection_type: The type of collection model, if it is a collection model.</span>
<span class="sd">                typing.List is the only collection type handled or expected.</span>
<span class="sd">                Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Return a tuple of Model Type (e.g. class &#39;trestle.oscal.catalog.Catalog&#39;),</span>
<span class="sd">            Model Alias (e.g. &#39;catalog.metadata&#39;) and Instance of the Model.</span>
<span class="sd">            If the model is decomposed/split/distributed, the instance of the model contains</span>
<span class="sd">            the decomposed models loaded recursively.</span>

<span class="sd">        Note:</span>
<span class="sd">            This does not validate the model.  You must either validate the model separately or use the load_validate</span>
<span class="sd">            utilities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if trying to load file that does not exist, load path instead</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">abs_path</span> <span class="o">=</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">abs_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">TrestleNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File </span><span class="si">{</span><span class="n">abs_path</span><span class="si">}</span><span class="s1"> not found for load.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collection_type</span><span class="p">:</span>
            <span class="c1"># If the path contains a list type model</span>
            <span class="k">if</span> <span class="n">collection_type</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_load_list</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
            <span class="c1"># the only other collection type in OSCAL is dict, and it only applies to include_all,</span>
            <span class="c1"># which is too granular ever to be loaded by this routine</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Collection type </span><span class="si">{</span><span class="n">collection_type</span><span class="si">}</span><span class="s1"> not recognized for distributed load.&#39;</span><span class="p">)</span>

        <span class="c1"># Get current model</span>
        <span class="n">primary_model_type</span><span class="p">,</span> <span class="n">primary_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
        <span class="n">primary_model_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OscalBaseModel</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># is this an attempt to load an actual json or yaml file?</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">)</span>
        <span class="c1"># if file is sought but it doesn&#39;t exist, ignore and load as decomposed model</span>
        <span class="k">if</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span> <span class="ow">and</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">primary_model_instance</span> <span class="o">=</span> <span class="n">primary_model_type</span><span class="o">.</span><span class="n">oscal_read</span><span class="p">(</span><span class="n">abs_path</span><span class="p">)</span>
        <span class="c1"># Is model decomposed?</span>
        <span class="n">decomposed_dir</span> <span class="o">=</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">abs_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">decomposed_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">aliases_not_to_be_stripped</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">instances_to_be_merged</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">local_path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">trestle</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">file_utils</span><span class="o">.</span><span class="n">iterdir_without_hidden_files</span><span class="p">(</span><span class="n">decomposed_dir</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">local_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                    <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span><span class="p">,</span> <span class="n">model_instance</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
                    <span class="n">aliases_not_to_be_stripped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">instances_to_be_merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">local_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                    <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
                    <span class="c1"># Only load the directory if it is a collection model. Otherwise do nothing - it gets loaded when</span>
                    <span class="c1"># iterating over the model file</span>

                    <span class="c1"># If a model is just a container for a list e.g.</span>
                    <span class="c1"># class Foo(OscalBaseModel):  noqa: E800</span>
                    <span class="c1">#      __root__: List[Bar]    noqa: E800</span>
                    <span class="c1"># You need to test whether first a root key exists</span>
                    <span class="c1"># then whether the outer_type of root is a collection.</span>
                    <span class="c1"># Alternative is to do a try except to avoid the error for an unknown key.</span>

                    <span class="k">if</span> <span class="n">model_type</span><span class="o">.</span><span class="n">is_collection_container</span><span class="p">():</span>
                        <span class="c1"># This directory is a decomposed List or Dict</span>
                        <span class="n">collection_type</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">()</span>
                        <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span><span class="p">,</span> <span class="n">model_instance</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span>
                                                                                              <span class="n">abs_trestle_root</span><span class="p">,</span>
                                                                                              <span class="n">collection_type</span><span class="p">)</span>
                        <span class="n">aliases_not_to_be_stripped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">instances_to_be_merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>
            <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">primary_model_instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="n">primary_model_instance</span><span class="o">.</span><span class="vm">__dict__</span>

            <span class="n">merged_model_type</span><span class="p">,</span> <span class="n">merged_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span>
                                                                                       <span class="n">abs_trestle_root</span><span class="p">,</span>
                                                                                       <span class="n">aliases_not_to_be_stripped</span><span class="p">)</span>

            <span class="c1"># The following use of top_level is to allow loading of a top level model by name only, e.g. MyCatalog</span>
            <span class="c1"># There may be a better overall way to approach this.</span>
            <span class="n">top_level</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">merged_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aliases_not_to_be_stripped</span><span class="p">)):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">aliases_not_to_be_stripped</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">instance</span> <span class="o">=</span> <span class="n">instances_to_be_merged</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;__root__&#39;</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span>
                                                                                                    <span class="n">OscalBaseModel</span><span class="p">):</span>
                    <span class="n">instance</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;__root__&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">top_level</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">primary_model_dict</span><span class="p">:</span>
                    <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">primary_model_dict</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>

            <span class="n">merged_model_instance</span> <span class="o">=</span> <span class="n">merged_model_type</span><span class="p">(</span><span class="o">**</span><span class="n">primary_model_dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">merged_model_type</span><span class="p">,</span> <span class="n">merged_model_alias</span><span class="p">,</span> <span class="n">merged_model_instance</span>
        <span class="k">return</span> <span class="n">primary_model_type</span><span class="p">,</span> <span class="n">primary_model_alias</span><span class="p">,</span> <span class="n">primary_model_instance</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_model_for_class</span><span class="p">(</span>
        <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">model_class</span><span class="p">:</span> <span class="n">TG</span><span class="p">,</span>
        <span class="n">file_content_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FileContentType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">TG</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a model by name and model class and infer file content type if not specified.</span>

<span class="sd">        If you need to load an existing model but its content type may not be known, use this method.</span>
<span class="sd">        But the file content type should be specified if it is somehow known.</span>

<span class="sd">        Note:  This does not validate the model.  If you want to validate the model use the load_validate utilities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span>
            <span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span>
        <span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">file_content_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">file_content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">root_model_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to load model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s1"> without specifying json or yaml.&#39;</span><span class="p">)</span>
        <span class="n">full_model_path</span> <span class="o">=</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">full_model_path</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="p">,</span> <span class="n">full_model_path</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_model_for_type</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                            <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load model for the given type and name.&quot;&quot;&quot;</span>
        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
        <span class="n">model_path</span> <span class="o">=</span> <span class="n">trestle_root</span> <span class="o">/</span> <span class="n">dir_name</span> <span class="o">/</span> <span class="n">model_name</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">model_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No model is found at path: </span><span class="si">{</span><span class="n">model_path</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">oscal_object</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">oscal_object</span><span class="p">,</span> <span class="n">model_path</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">save_top_level_model</span><span class="p">(</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_content_type</span><span class="p">:</span> <span class="n">FileContentType</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save a model by name and infer model type by inspection.</span>

<span class="sd">        You don&#39;t need to specify the model type (catalog, profile, etc.) but you must specify the file content type.</span>
<span class="sd">        If the model directory does not exist, it is created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="n">full_model_path</span> <span class="o">=</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">full_model_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">full_model_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">oscal_write</span><span class="p">(</span><span class="n">full_model_path</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_relative_model_type</span><span class="p">(</span><span class="n">relative_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the relative path of a file with respect to &#39;trestle_root&#39; return the oscal model type.</span>

<span class="sd">        Args:</span>
<span class="sd">            relative_path: Relative path of the model with respect to the root directory of the trestle workspace.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Type of Oscal Model for the provided model</span>
<span class="sd">            Alias of that oscal model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span>
                <span class="s1">&#39;Insufficient path length to be a valid relative path w.r.t trestle workspace root directory.&#39;</span>
            <span class="p">)</span>
        <span class="n">model_dir</span> <span class="o">=</span> <span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">model_relative_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="o">*</span><span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>  <span class="c1"># catalogs, profiles, etc</span>

        <span class="k">if</span> <span class="n">model_dir</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_DIR_LIST</span><span class="p">:</span>
            <span class="n">module_name</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_DIR_TO_MODEL_MODULE</span><span class="p">[</span><span class="n">model_dir</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No valid trestle model type directory (e.g. catalogs) found for </span><span class="si">{</span><span class="n">model_dir</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

        <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="n">full_alias</span> <span class="o">=</span> <span class="n">model_alias</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">model_relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">model_alias</span> <span class="o">!=</span> <span class="n">alias</span><span class="p">:</span>
                <span class="n">model_alias</span> <span class="o">=</span> <span class="n">alias</span>
                <span class="n">full_alias</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">full_alias</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">model_alias</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
                    <span class="n">model_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()[</span><span class="n">alias</span><span class="p">]</span><span class="o">.</span><span class="n">outer_type_</span>

        <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">full_alias</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_stripped_model_type</span><span class="p">(</span>
        <span class="n">absolute_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">absolute_trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">aliases_not_to_be_stripped</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the stripped contextual model class and alias based on the contextual path.</span>

<span class="sd">        This function relies on the directory structure of the trestle model being edited to determine, based on the</span>
<span class="sd">        existing files and folder, which fields should be stripped from the model type represented by the</span>
<span class="sd">        path passed in as a parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">aliases_not_to_be_stripped</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">aliases_not_to_be_stripped</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">singular_model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_relative_model_type</span><span class="p">(</span>
            <span class="n">absolute_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">absolute_trestle_root</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;singular model type </span><span class="si">{</span><span class="n">singular_model_type</span><span class="si">}</span><span class="s1"> model alias </span><span class="si">{</span><span class="n">model_alias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># Stripped models do not apply to collection types such as List[] and Dict{}</span>
        <span class="c1"># if model type is a list or dict, generate a new wrapping model for it</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">singular_model_type</span><span class="p">):</span>
            <span class="n">malias</span> <span class="o">=</span> <span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">alias_to_classname</span><span class="p">(</span><span class="n">malias</span><span class="p">,</span> <span class="n">AliasMode</span><span class="o">.</span><span class="n">JSON</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;collection field type class name </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s1"> and alias </span><span class="si">{</span><span class="n">malias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="n">__base__</span><span class="o">=</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">__root__</span><span class="o">=</span><span class="p">(</span><span class="n">singular_model_type</span><span class="p">,</span> <span class="o">...</span><span class="p">))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model_type created: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span>

        <span class="n">malias</span> <span class="o">=</span> <span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;not collection field type, malias: </span><span class="si">{</span><span class="n">malias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="n">malias</span> <span class="o">!=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">absolute_path</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="n">split_subdir</span> <span class="o">=</span> <span class="n">absolute_path</span> <span class="o">/</span> <span class="n">malias</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">split_subdir</span> <span class="o">=</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>

        <span class="n">aliases_to_be_stripped</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">split_subdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">iterdir_without_hidden_files</span><span class="p">(</span><span class="n">split_subdir</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aliases_not_to_be_stripped</span><span class="p">:</span>
                    <span class="n">aliases_to_be_stripped</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;aliases to be stripped: </span><span class="si">{</span><span class="n">aliases_to_be_stripped</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases_to_be_stripped</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="n">singular_model_type</span><span class="o">.</span><span class="n">create_stripped_model_type</span><span class="p">(</span>
                <span class="n">stripped_fields_aliases</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">aliases_to_be_stripped</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model_type: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span>
        <span class="k">return</span> <span class="n">singular_model_type</span><span class="p">,</span> <span class="n">model_alias</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get plural model directory from model type.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not a valid model type: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_TO_MODEL_DIR</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_models_of_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of model names for requested type in trestle directory.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Model type </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1"> is not supported&#39;</span><span class="p">)</span>
        <span class="c1"># search relative to project root</span>
        <span class="n">trestle_root</span> <span class="o">=</span> <span class="n">extract_trestle_project_root</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">trestle_root</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Given directory </span><span class="si">{</span><span class="n">root</span><span class="si">}</span><span class="s1"> is not within a trestle project.&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="s1">&#39;Given directory is not within a trestle project.&#39;</span><span class="p">)</span>

        <span class="c1"># contruct path to the model file name</span>
        <span class="n">model_dir_name</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
        <span class="n">root_model_dir</span> <span class="o">=</span> <span class="n">trestle_root</span> <span class="o">/</span> <span class="n">model_dir_name</span>
        <span class="n">model_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">root_model_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*/&#39;</span><span class="p">):</span>
            <span class="c1"># only look for proper json and yaml files</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_should_ignore</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">stem</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;Ignoring validation of misplaced file </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> &#39;</span>
                        <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;found in the model directory, </span><span class="si">{</span><span class="n">model_dir_name</span><span class="si">}</span><span class="s1">.&#39;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">model_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model_list</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_all_models</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all models in trestle directory as tuples (model_type, model_name).&quot;&quot;&quot;</span>
        <span class="n">full_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_type</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
            <span class="n">models</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_models_of_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
                <span class="n">full_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">model_type</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">full_list</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_model_path_for_name_and_class</span><span class="p">(</span>
        <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">model_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
        <span class="n">file_content_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FileContentType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the full path of a model given its name, model type and file content type.</span>

<span class="sd">        If file_content_type is given it will not inspect the file system or confirm the needed path and file exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">file_content_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
            <span class="n">file_content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">root_model_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">None</span>

            <span class="k">return</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>

        <span class="n">root_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">root_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_singular_alias</span><span class="p">(</span><span class="n">alias_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relative_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the alias in the singular form from a jsonpath.</span>

<span class="sd">        If contextual_mode is True and contextual_path is None, it assumes alias_path</span>
<span class="sd">        is relative to the directory the user is running trestle from.</span>

<span class="sd">        Args:</span>
<span class="sd">            alias_path: The current alias element path as a string</span>
<span class="sd">            relative_path: Optional relative path (w.r.t. trestle_root) to cater for relative element paths.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Alias as a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">alias_path</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid jsonpath </span><span class="si">{</span><span class="n">alias_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">singular_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">full_alias_path</span> <span class="o">=</span> <span class="n">alias_path</span>
        <span class="k">if</span> <span class="n">relative_path</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;get_singular_alias contextual mode: </span><span class="si">{</span><span class="nb">str</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">full_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_relative_model_type</span><span class="p">(</span><span class="n">relative_path</span><span class="p">)</span>
            <span class="n">first_alias_a</span> <span class="o">=</span> <span class="n">full_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">first_alias_b</span> <span class="o">=</span> <span class="n">alias_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">first_alias_a</span> <span class="o">==</span> <span class="n">first_alias_b</span><span class="p">:</span>
                <span class="n">full_model_alias</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">full_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">full_alias_path</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">full_model_alias</span><span class="p">,</span> <span class="n">alias_path</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

        <span class="n">path_parts</span> <span class="o">=</span> <span class="n">full_alias_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">ALIAS_PATH_SEPARATOR</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;path parts: </span><span class="si">{</span><span class="n">path_parts</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">model_types</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">root_model_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">module_name</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_TO_MODEL_MODULE</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">root_model_alias</span> <span class="o">==</span> <span class="n">model_alias</span><span class="p">:</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">model_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">root_model_alias</span><span class="si">}</span><span class="s1"> is an invalid root model alias.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">root_model_alias</span>

        <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># go through path parts skipping first one</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
                <span class="c1"># if it is a collection type and last part is * then break</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">path_parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="c1"># otherwise get the inner type of items in the collection</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
                <span class="c1"># and bump i</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">path_part</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">field_map</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">path_part</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field_map</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">path_part</span><span class="p">]</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">outer_type_</span>
            <span class="n">model_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>

        <span class="n">last_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">last_alias</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
            <span class="n">last_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># generic model and not list, so return itself fixme doc</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">last_alias</span>

        <span class="n">parent_model_type</span> <span class="o">=</span> <span class="n">model_types</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">field_map</span> <span class="o">=</span> <span class="n">parent_model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">last_alias</span><span class="p">]</span>
            <span class="n">outer_type</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">outer_type_</span>
            <span class="n">inner_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">outer_type</span><span class="p">)</span>
            <span class="n">inner_type_name</span> <span class="o">=</span> <span class="n">inner_type</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">singular_alias</span> <span class="o">=</span> <span class="n">str_utils</span><span class="o">.</span><span class="n">classname_to_alias</span><span class="p">(</span><span class="n">inner_type_name</span><span class="p">,</span> <span class="n">AliasMode</span><span class="o">.</span><span class="n">JSON</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in json path </span><span class="si">{</span><span class="n">alias_path</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">singular_alias</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the root model class and alias based on the module.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;Model&#39;</span><span class="p">):</span>
            <span class="n">model_metadata</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
            <span class="k">return</span> <span class="n">model_metadata</span><span class="o">.</span><span class="n">type_</span><span class="p">,</span> <span class="n">model_metadata</span><span class="o">.</span><span class="n">alias</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="s1">&#39;Invalid module&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_root_path_for_top_level_model</span><span class="p">(</span>
        <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the root path to a model given its name and class - with no suffix.</span>

<span class="sd">        This is a private method used only to construct the root filepath based on model name and type.</span>
<span class="sd">        It does not check for existence or content type and it does not create the directory if it does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">model_class</span><span class="o">.</span><span class="vm">__module__</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_MODULE_LIST</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to determine model type for model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s1"> with class </span><span class="si">{</span><span class="n">model_class</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">model_alias</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_MODULE_TO_MODEL_TYPE</span><span class="p">[</span><span class="n">model_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">]</span>
        <span class="n">model_dir</span> <span class="o">=</span> <span class="n">trestle_root</span> <span class="o">/</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_TO_MODEL_DIR</span><span class="p">[</span><span class="n">model_alias</span><span class="p">]</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">model_dir</span> <span class="o">/</span> <span class="n">model_alias</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_extract_alias</span><span class="p">(</span><span class="n">string_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract alias from filename or directory name removing extensions and prefixes related to dict and list.</span>

<span class="sd">        As we need to do this for multiple parts of a path operating on strings is easier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">alias</span> <span class="o">=</span> <span class="n">string_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
            <span class="n">const</span><span class="o">.</span><span class="n">IDX_SEP</span>
        <span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># get suffix of file or directory name representing list or dict item</span>
        <span class="k">return</span> <span class="n">alias</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_should_ignore</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the file or directory should be ignored or not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="ow">or</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_load_list</span><span class="p">(</span><span class="n">abs_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Given path to a directory of list(array) models, load the distributed models.&quot;&quot;&quot;</span>
        <span class="n">aliases_not_to_be_stripped</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">instances_to_be_merged</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">collection_model_type</span><span class="p">,</span> <span class="n">collection_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">trestle</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">file_utils</span><span class="o">.</span><span class="n">iterdir_without_hidden_files</span><span class="p">(</span><span class="n">abs_path</span><span class="p">)):</span>

            <span class="c1"># ASSUMPTION HERE: if it is a directory, there&#39;s a file that can not be decomposed further.</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">model_alias</span><span class="p">,</span> <span class="n">model_instance</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>

            <span class="n">instances_to_be_merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>
            <span class="n">aliases_not_to_be_stripped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">collection_model_type</span><span class="p">,</span> <span class="n">collection_model_alias</span><span class="p">,</span> <span class="n">instances_to_be_merged</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_parameter_to_dict_recurse</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">partial</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert obj to dict containing only string values with recursion.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj: The parameter or its consituent parts in recursive calls</span>
<span class="sd">            partial: Whether to convert the entire param or just the parts needed for markdown header</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted parameter as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">main_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="s1">&#39;how_many&#39;</span><span class="p">,</span> <span class="s1">&#39;guidelines&#39;</span><span class="p">,</span> <span class="s1">&#39;prose&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Remarks</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">__root__</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">HowMany</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span>
        <span class="c1"># it is either a string already or we cast it to string</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">FIELDS_SET</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="c1"># it is an oscal object and we need to recurse within its attributes</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">__fields_set__</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">partial</span> <span class="ow">and</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">main_fields</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">attr</span><span class="p">:</span>
                    <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ModelUtils</span><span class="o">.</span><span class="n">_parameter_to_dict_recurse</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">partial</span><span class="p">))</span>
                <span class="n">res</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_list</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">res</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">attr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_parameter_to_dict_recurse</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">partial</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parameter_to_dict</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">partial</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert obj to dict containing only string values, storing only the fields that have values set.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj: The parameter or its consituent parts in recursive calls</span>
<span class="sd">            partial: Whether to convert the entire param or just the parts needed for markdown header</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted parameter as dictionary, with values as None if not present</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_parameter_to_dict_recurse</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">partial</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_string_to_howmany</span><span class="p">(</span><span class="n">count_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">clean_str</span> <span class="o">=</span> <span class="n">count_str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clean_str</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">ONE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">common</span><span class="o">.</span><span class="n">HowMany</span><span class="o">.</span><span class="n">one</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">clean_str</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">ONE_OR_MORE_SPACED</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">common</span><span class="o">.</span><span class="n">HowMany</span><span class="o">.</span><span class="n">one_or_more</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">dict_to_parameter</span><span class="p">(</span><span class="n">param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert dict with only string values to Parameter with handling for HowMany and with validity checks.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_dict: Dictionary of pure string values representing Parameter contents</span>

<span class="sd">        Returns:</span>
<span class="sd">            A valid OSCAL Parameter</span>

<span class="sd">        Notes:</span>
<span class="sd">            This handles both partial and full parameter dictionaries</span>
<span class="sd">            It checks for validity of the values if a select and HowMany is specified</span>
<span class="sd">            There is special handling for values: If it is a single string it is converted to list of one ParameterValue</span>
<span class="sd">            But if it is a list of strings is regarded as a list of values and is converted to a list of ParameterValues</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="c1"># special handling when only one value present - convert to list of 1</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="p">]</span>
            <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
        <span class="k">if</span> <span class="s1">&#39;select&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span> <span class="ow">and</span> <span class="s1">&#39;how_many&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">]:</span>
            <span class="n">count_str</span> <span class="o">=</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">][</span><span class="s1">&#39;how_many&#39;</span><span class="p">]</span>
            <span class="n">how_many</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_string_to_howmany</span><span class="p">(</span><span class="n">count_str</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">how_many</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognized HowMany value </span><span class="si">{</span><span class="n">how_many</span><span class="si">}</span><span class="s1"> in Parameter: should be one-or-more or one.&#39;</span><span class="p">)</span>
            <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">][</span><span class="s1">&#39;how_many&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">how_many</span>
            <span class="k">if</span> <span class="n">how_many</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">ONE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Parameter specifies HowMany=1 but has </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1"> values given.&#39;</span><span class="p">)</span>
            <span class="n">choices</span> <span class="o">=</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">choices</span> <span class="ow">and</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter </span><span class="si">{</span><span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> has value </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2"> not in choices: </span><span class="si">{</span><span class="n">choices</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;props&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
            <span class="n">display_name</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">display_name</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GENERIC_NS</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">AGGREGATES</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
            <span class="c1"># removing aggregates as this is prop just informative in markdown</span>
            <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">AGGREGATES</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">ALT_IDENTIFIER</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
            <span class="c1"># removing alt-identifier as this is prop just informative in markdown</span>
            <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">ALT_IDENTIFIER</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;ns&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
            <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="o">**</span><span class="n">param_dict</span><span class="p">)</span>
        <span class="n">param</span><span class="o">.</span><span class="n">props</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">param</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">last_modified_at_time</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a LastModified set to timestamp or now.&quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="k">if</span> <span class="n">timestamp</span> <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">timestamp</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">update_last_modified</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the LastModified timestamp in top level model to now.&quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="k">if</span> <span class="n">timestamp</span> <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span> <span class="o">=</span> <span class="n">timestamp</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">model_age</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find time in seconds since LastModified timestamp.&quot;&quot;&quot;</span>
        <span class="c1"># default to one year if no last_modified</span>
        <span class="n">age_seconds</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">DAY_SECONDS</span> <span class="o">*</span> <span class="mi">365</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span> <span class="o">-</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span>
            <span class="n">age_seconds</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">seconds</span>
        <span class="k">return</span> <span class="n">age_seconds</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Traverse object and return list of values of specified name.&quot;&quot;&quot;</span>
        <span class="n">loe</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">loe</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">FIELDS_SET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                    <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">name_of_interest</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
                <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name_of_interest</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
                <span class="n">loe</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">[</span><span class="n">name_of_interest</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">loe</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">has_no_duplicate_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if duplicate values of type exist in object.&quot;&quot;&quot;</span>
        <span class="n">loe</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">)</span>
        <span class="n">set_loe</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">loe</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">loe</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_loe</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">items</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">loe</span><span class="p">:</span>
            <span class="n">items</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># now print items</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">instances</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">instances</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicate detected of item </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1"> with </span><span class="si">{</span><span class="n">instances</span><span class="si">}</span><span class="s1"> instances.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">find_uuid_refs</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find uuid references made in prose and links.&quot;&quot;&quot;</span>
        <span class="c1"># hrefs have form #foo or #uuid</span>
        <span class="n">uuid_strs</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="s1">&#39;href&#39;</span><span class="p">)</span>

        <span class="c1"># prose has uuid refs in markdown form: [foo](#bar) or [foo](#uuid)</span>
        <span class="n">prose_list</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="s1">&#39;prose&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">prose</span> <span class="ow">in</span> <span class="n">prose_list</span><span class="p">:</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">MARKDOWN_URL_REGEX</span><span class="p">,</span> <span class="n">prose</span><span class="p">)</span>
            <span class="c1"># the [1] is to extract the inner of 3 capture patterns</span>
            <span class="n">new_uuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">]</span>
            <span class="n">uuid_strs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_uuids</span><span class="p">)</span>

        <span class="c1"># collect the strings that start with # and are potential uuids</span>
        <span class="n">uuid_strs</span> <span class="o">=</span> <span class="p">[</span><span class="n">uuid_str</span> <span class="k">for</span> <span class="n">uuid_str</span> <span class="ow">in</span> <span class="n">uuid_strs</span> <span class="k">if</span> <span class="n">uuid_str</span> <span class="ow">and</span> <span class="n">uuid_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">]</span>

        <span class="c1"># go through all matches and build set of those that are uuids</span>
        <span class="n">uuid_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">uuid_match</span> <span class="k">for</span> <span class="n">uuid_str</span> <span class="ow">in</span> <span class="n">uuid_strs</span> <span class="k">for</span> <span class="n">uuid_match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">UUID_REGEX</span><span class="p">,</span> <span class="n">uuid_str</span><span class="p">[</span><span class="mi">1</span><span class="p">:])}</span>
        <span class="k">return</span> <span class="n">uuid_set</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_regenerate_uuids_in_place</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update all uuids in model that require updating.</span>

<span class="sd">        Go through the model and replace all dicts with key == &#39;uuid&#39; and replace the value with a new uuid4.</span>
<span class="sd">        Build a lookup table of the updates that were made.</span>
<span class="sd">        This function does not update the corresponding refs to those uuid&#39;s.  That is done by update_uuid_refs</span>
<span class="sd">        Note that this function needs to be started off with uuid_lut == {}, i.e. an empty dict.</span>
<span class="sd">        After that it recurses and grows the lut.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_of_interest: pydantic.BaseModel, list, dict or str will be updated</span>
<span class="sd">            uuid_lut: dict of the growing lut of old:new uuid&#39;s.  First call must be made with value {}</span>

<span class="sd">        Returns:</span>
<span class="sd">            The updated object_of_interest with new uuid&#39;s (but refs to them are not updated)</span>
<span class="sd">            The final lookup table of old:new uuid&#39;s</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uuid_str</span> <span class="o">=</span> <span class="s1">&#39;uuid&#39;</span>
        <span class="c1"># Certain types are known not to need updating and should not change</span>
        <span class="c1"># Resources are identified by uuid, and the corresponding href will have # in front of the uuid string</span>
        <span class="c1"># Neither of these should change</span>
        <span class="c1"># If other similar types are found they should be added to the FixedUuidModel typevar to prevent updating</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Resource</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="c1"># fields has names of all fields in model</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">FIELDS_SET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">new_object</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="n">uuid_str</span><span class="p">:</span>
                    <span class="n">orig_uuid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">orig_uuid</span><span class="p">:</span>
                        <span class="n">new_object</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
                        <span class="n">uuid_lut</span><span class="p">[</span><span class="n">orig_uuid</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_object</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_regenerate_uuids_in_place</span><span class="p">(</span>
                        <span class="n">object_of_interest</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field</span><span class="p">],</span>
                        <span class="n">uuid_lut</span>
                    <span class="p">)</span>
                <span class="n">object_of_interest</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_object</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
                <span class="n">new_item</span><span class="p">,</span> <span class="n">uuid_lut</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_regenerate_uuids_in_place</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
                <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_item</span><span class="p">)</span>
            <span class="n">object_of_interest</span> <span class="o">=</span> <span class="n">new_list</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">uuid_str</span><span class="p">:</span>
                    <span class="n">new_val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">uuid_str</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_val</span>
                    <span class="n">uuid_lut</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_val</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_value</span><span class="p">,</span> <span class="n">uuid_lut</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_regenerate_uuids_in_place</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>
            <span class="n">object_of_interest</span> <span class="o">=</span> <span class="n">new_dict</span>
        <span class="k">return</span> <span class="n">object_of_interest</span><span class="p">,</span> <span class="n">uuid_lut</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_update_new_uuid_refs</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update all refs to uuids that were changed.&quot;&quot;&quot;</span>
        <span class="n">n_refs_updated</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">FIELDS_SET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">new_object</span><span class="p">,</span> <span class="n">n_new_updates</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_update_new_uuid_refs</span><span class="p">(</span>
                    <span class="n">object_of_interest</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field</span><span class="p">],</span>
                    <span class="n">uuid_lut</span>
                <span class="p">)</span>
                <span class="n">n_refs_updated</span> <span class="o">+=</span> <span class="n">n_new_updates</span>
                <span class="n">object_of_interest</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_object</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
                <span class="n">new_item</span><span class="p">,</span> <span class="n">n_new_updates</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_update_new_uuid_refs</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
                <span class="n">n_refs_updated</span> <span class="o">+=</span> <span class="n">n_new_updates</span>
                <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_item</span><span class="p">)</span>
            <span class="n">object_of_interest</span> <span class="o">=</span> <span class="n">new_list</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">uuid_lut</span><span class="p">:</span>
                        <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">uuid_lut</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
                        <span class="n">n_refs_updated</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_value</span><span class="p">,</span> <span class="n">n_new_updates</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_update_new_uuid_refs</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
                    <span class="n">n_refs_updated</span> <span class="o">+=</span> <span class="n">n_new_updates</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>
            <span class="n">object_of_interest</span> <span class="o">=</span> <span class="n">new_dict</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">object_of_interest</span> <span class="ow">in</span> <span class="n">uuid_lut</span><span class="p">:</span>
                <span class="n">n_refs_updated</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">object_of_interest</span> <span class="o">=</span> <span class="n">uuid_lut</span><span class="p">[</span><span class="n">object_of_interest</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">object_of_interest</span><span class="p">,</span> <span class="n">n_refs_updated</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">regenerate_uuids</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Regenerate all uuids in object and update corresponding references.</span>

<span class="sd">        Find all dicts with key == &#39;uuid&#39; and replace the value with a new uuid4.</span>
<span class="sd">        Build a corresponding lookup table as you go, of old:new uuid values.</span>
<span class="sd">        Then make a second pass through the object and replace all string values</span>
<span class="sd">        present in the lookup table with the new value.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_of_interest: pydantic.BaseModel, list, dict or str will be updated</span>

<span class="sd">        Returns:</span>
<span class="sd">            The updated object with new uuid&#39;s and refs</span>
<span class="sd">            The final lookup table of old:new uuid&#39;s</span>
<span class="sd">            A count of the number of refs that were updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_regenerate_uuids_in_place</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">new_object</span><span class="p">,</span> <span class="n">n_refs_updated</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_update_new_uuid_refs</span><span class="p">(</span><span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">,</span> <span class="n">n_refs_updated</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fields_set_non_none</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the fields set with Nones and empty items removed.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">as_filtered_list</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">__fields_set__</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_objects_differ</span><span class="p">(</span>
        <span class="n">obj_a</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">obj_b</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">ignore_type_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">ignore_name_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">ignore_all_uuid</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compare two objects with option to ignore given types.</span>

<span class="sd">        This does not check for tuples or other structures that won&#39;t be found in JSON.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj_a_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj_a</span><span class="p">)</span>
        <span class="n">obj_b_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">obj_a</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span> <span class="ow">or</span> <span class="n">obj_a_type</span> <span class="o">!=</span> <span class="n">obj_b_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">obj_a</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">obj_a_type</span> <span class="ow">in</span> <span class="n">ignore_type_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">obj_a_type</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obj_a</span> <span class="o">!=</span> <span class="n">obj_b</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">fields_a</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">fields_set_non_none</span><span class="p">(</span><span class="n">obj_a</span><span class="p">)</span>
            <span class="n">fields_b</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">fields_set_non_none</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fields_a</span> <span class="o">!=</span> <span class="n">fields_b</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">list_utils</span><span class="o">.</span><span class="n">as_filtered_list</span><span class="p">(</span><span class="n">fields_a</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_name_list</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
                <span class="k">if</span> <span class="n">ignore_all_uuid</span> <span class="ow">and</span> <span class="s1">&#39;uuid&#39;</span> <span class="ow">in</span> <span class="n">field</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_objects_differ</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">field</span><span class="p">),</span>
                                              <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_b</span><span class="p">,</span> <span class="n">field</span><span class="p">),</span>
                                              <span class="n">ignore_type_list</span><span class="p">,</span>
                                              <span class="n">ignore_name_list</span><span class="p">,</span>
                                              <span class="n">ignore_all_uuid</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">obj_a_type</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj_a</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj_b</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">item_a</span><span class="p">,</span> <span class="n">item_b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">obj_b</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_objects_differ</span><span class="p">(</span><span class="n">item_a</span><span class="p">,</span> <span class="n">item_b</span><span class="p">,</span> <span class="n">ignore_type_list</span><span class="p">,</span> <span class="n">ignore_name_list</span><span class="p">,</span> <span class="n">ignore_all_uuid</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">obj_a_type</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj_a</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">obj_b</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj_a</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ignore_all_uuid</span> <span class="ow">and</span> <span class="s1">&#39;uuid&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_name_list</span> <span class="ow">and</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_objects_differ</span><span class="p">(</span>
                        <span class="n">val</span><span class="p">,</span> <span class="n">obj_b</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">ignore_type_list</span><span class="p">,</span> <span class="n">ignore_name_list</span><span class="p">,</span> <span class="n">ignore_all_uuid</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">obj_a</span> <span class="o">!=</span> <span class="n">obj_b</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">models_are_equivalent</span><span class="p">(</span>
        <span class="n">model_a</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
        <span class="n">model_b</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
        <span class="n">ignore_all_uuid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test if models are equivalent except for last modified and possibly uuid.</span>

<span class="sd">        If a model has had uuids regenerated, then all uuids *and references to them* are updated.  This means that</span>
<span class="sd">        special handling is required if a model has had uuids regenerated - when checking equivalence.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uuid_type_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">common</span><span class="o">.</span><span class="n">LastModified</span><span class="p">,</span>
            <span class="n">common</span><span class="o">.</span><span class="n">LocationUuid</span><span class="p">,</span>
            <span class="n">common</span><span class="o">.</span><span class="n">PartyUuid</span><span class="p">,</span>
            <span class="n">common</span><span class="o">.</span><span class="n">RelatedRisk</span><span class="p">,</span>
            <span class="n">common</span><span class="o">.</span><span class="n">Source</span><span class="p">,</span>
            <span class="n">assessment_plan</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
            <span class="n">assessment_results</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
            <span class="n">poam</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
            <span class="n">poam</span><span class="o">.</span><span class="n">RelatedObservation1</span>
        <span class="p">]</span>
        <span class="n">type_list</span> <span class="o">=</span> <span class="n">uuid_type_list</span> <span class="k">if</span> <span class="n">ignore_all_uuid</span> <span class="k">else</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">LastModified</span><span class="p">]</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_objects_differ</span><span class="p">(</span><span class="n">model_a</span><span class="p">,</span> <span class="n">model_b</span><span class="p">,</span> <span class="n">type_list</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;last_modified&#39;</span><span class="p">],</span> <span class="n">ignore_all_uuid</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_title_from_model_uri</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get title from model at uri.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fetcher</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">FetcherFactory</span><span class="o">.</span><span class="n">get_fetcher</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
            <span class="n">model</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">get_oscal</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">title</span>
        <span class="k">except</span> <span class="n">TrestleError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error finding title for model at uri </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







<h5 id="trestle.common.model_utils.ModelUtils-methods">Methods<a href="#trestle.common.model_utils.ModelUtils-methods" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.dict_to_parameter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dict_to_parameter</span><span class="p">(</span><span class="n">param_dict</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.dict_to_parameter" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Convert dict with only string values to Parameter with handling for HowMany and with validity checks.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>param_dict</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Dictionary of pure string values representing Parameter contents</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Parameter</code></td>
      <td><p>A valid OSCAL Parameter</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>This handles both partial and full parameter dictionaries
It checks for validity of the values if a select and HowMany is specified
There is special handling for values: If it is a single string it is converted to list of one ParameterValue
But if it is a list of strings is regarded as a list of values and is converted to a list of ParameterValues</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">dict_to_parameter</span><span class="p">(</span><span class="n">param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert dict with only string values to Parameter with handling for HowMany and with validity checks.</span>

<span class="sd">    Args:</span>
<span class="sd">        param_dict: Dictionary of pure string values representing Parameter contents</span>

<span class="sd">    Returns:</span>
<span class="sd">        A valid OSCAL Parameter</span>

<span class="sd">    Notes:</span>
<span class="sd">        This handles both partial and full parameter dictionaries</span>
<span class="sd">        It checks for validity of the values if a select and HowMany is specified</span>
<span class="sd">        There is special handling for values: If it is a single string it is converted to list of one ParameterValue</span>
<span class="sd">        But if it is a list of strings is regarded as a list of values and is converted to a list of ParameterValues</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="c1"># special handling when only one value present - convert to list of 1</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="p">]</span>
        <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
    <span class="k">if</span> <span class="s1">&#39;select&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span> <span class="ow">and</span> <span class="s1">&#39;how_many&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">]:</span>
        <span class="n">count_str</span> <span class="o">=</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">][</span><span class="s1">&#39;how_many&#39;</span><span class="p">]</span>
        <span class="n">how_many</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_string_to_howmany</span><span class="p">(</span><span class="n">count_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">how_many</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognized HowMany value </span><span class="si">{</span><span class="n">how_many</span><span class="si">}</span><span class="s1"> in Parameter: should be one-or-more or one.&#39;</span><span class="p">)</span>
        <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">][</span><span class="s1">&#39;how_many&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">how_many</span>
        <span class="k">if</span> <span class="n">how_many</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">ONE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Parameter specifies HowMany=1 but has </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1"> values given.&#39;</span><span class="p">)</span>
        <span class="n">choices</span> <span class="o">=</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;select&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">choices</span> <span class="ow">and</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter </span><span class="si">{</span><span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> has value </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2"> not in choices: </span><span class="si">{</span><span class="n">choices</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;props&#39;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">)</span>
        <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">display_name</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GENERIC_NS</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">AGGREGATES</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
        <span class="c1"># removing aggregates as this is prop just informative in markdown</span>
        <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">AGGREGATES</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">ALT_IDENTIFIER</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
        <span class="c1"># removing alt-identifier as this is prop just informative in markdown</span>
        <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">ALT_IDENTIFIER</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;ns&#39;</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
        <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>
    <span class="n">param</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="o">**</span><span class="n">param_dict</span><span class="p">)</span>
    <span class="n">param</span><span class="o">.</span><span class="n">props</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">param</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.fields_set_non_none" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fields_set_non_none</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.fields_set_non_none" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Find the fields set with Nones and empty items removed.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">fields_set_non_none</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the fields set with Nones and empty items removed.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">as_filtered_list</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">__fields_set__</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.find_uuid_refs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_uuid_refs</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.find_uuid_refs" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Find uuid references made in prose and links.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">find_uuid_refs</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find uuid references made in prose and links.&quot;&quot;&quot;</span>
    <span class="c1"># hrefs have form #foo or #uuid</span>
    <span class="n">uuid_strs</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="s1">&#39;href&#39;</span><span class="p">)</span>

    <span class="c1"># prose has uuid refs in markdown form: [foo](#bar) or [foo](#uuid)</span>
    <span class="n">prose_list</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="s1">&#39;prose&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">prose</span> <span class="ow">in</span> <span class="n">prose_list</span><span class="p">:</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">MARKDOWN_URL_REGEX</span><span class="p">,</span> <span class="n">prose</span><span class="p">)</span>
        <span class="c1"># the [1] is to extract the inner of 3 capture patterns</span>
        <span class="n">new_uuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">]</span>
        <span class="n">uuid_strs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_uuids</span><span class="p">)</span>

    <span class="c1"># collect the strings that start with # and are potential uuids</span>
    <span class="n">uuid_strs</span> <span class="o">=</span> <span class="p">[</span><span class="n">uuid_str</span> <span class="k">for</span> <span class="n">uuid_str</span> <span class="ow">in</span> <span class="n">uuid_strs</span> <span class="k">if</span> <span class="n">uuid_str</span> <span class="ow">and</span> <span class="n">uuid_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">]</span>

    <span class="c1"># go through all matches and build set of those that are uuids</span>
    <span class="n">uuid_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">uuid_match</span> <span class="k">for</span> <span class="n">uuid_str</span> <span class="ow">in</span> <span class="n">uuid_strs</span> <span class="k">for</span> <span class="n">uuid_match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">UUID_REGEX</span><span class="p">,</span> <span class="n">uuid_str</span><span class="p">[</span><span class="mi">1</span><span class="p">:])}</span>
    <span class="k">return</span> <span class="n">uuid_set</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.find_values_by_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.find_values_by_name" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Traverse object and return list of values of specified name.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Traverse object and return list of values of specified name.&quot;&quot;&quot;</span>
    <span class="n">loe</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">loe</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">FIELDS_SET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">name_of_interest</span><span class="p">)</span>
                <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
            <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name_of_interest</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="p">:</span>
            <span class="n">loe</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">[</span><span class="n">name_of_interest</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">object_of_interest</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">loe</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">loe</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_all_models" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_models</span><span class="p">(</span><span class="n">root</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_all_models" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get list of all models in trestle directory as tuples (model_type, model_name).</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_all_models</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of all models in trestle directory as tuples (model_type, model_name).&quot;&quot;&quot;</span>
    <span class="n">full_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">model_type</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
        <span class="n">models</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_models_of_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
            <span class="n">full_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">model_type</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">full_list</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_model_path_for_name_and_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_model_path_for_name_and_class</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">file_content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_model_path_for_name_and_class" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Find the full path of a model given its name, model type and file content type.</p>
<p>If file_content_type is given it will not inspect the file system or confirm the needed path and file exists.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_model_path_for_name_and_class</span><span class="p">(</span>
    <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">model_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
    <span class="n">file_content_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FileContentType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the full path of a model given its name, model type and file content type.</span>

<span class="sd">    If file_content_type is given it will not inspect the file system or confirm the needed path and file exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_content_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
        <span class="n">file_content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">root_model_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>

    <span class="n">root_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">root_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_models_of_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_models_of_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_models_of_type" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get list of model names for requested type in trestle directory.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_models_of_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of model names for requested type in trestle directory.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Model type </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1"> is not supported&#39;</span><span class="p">)</span>
    <span class="c1"># search relative to project root</span>
    <span class="n">trestle_root</span> <span class="o">=</span> <span class="n">extract_trestle_project_root</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">trestle_root</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Given directory </span><span class="si">{</span><span class="n">root</span><span class="si">}</span><span class="s1"> is not within a trestle project.&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="s1">&#39;Given directory is not within a trestle project.&#39;</span><span class="p">)</span>

    <span class="c1"># contruct path to the model file name</span>
    <span class="n">model_dir_name</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
    <span class="n">root_model_dir</span> <span class="o">=</span> <span class="n">trestle_root</span> <span class="o">/</span> <span class="n">model_dir_name</span>
    <span class="n">model_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">root_model_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*/&#39;</span><span class="p">):</span>
        <span class="c1"># only look for proper json and yaml files</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_should_ignore</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">stem</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Ignoring validation of misplaced file </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> &#39;</span>
                    <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;found in the model directory, </span><span class="si">{</span><span class="n">model_dir_name</span><span class="si">}</span><span class="s1">.&#39;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">model_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model_list</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_relative_model_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_relative_model_type</span><span class="p">(</span><span class="n">relative_path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_relative_model_type" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Given the relative path of a file with respect to 'trestle_root' return the oscal model type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>relative_path</code></td>
        <td><code>Path</code></td>
        <td><p>Relative path of the model with respect to the root directory of the trestle workspace.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Type[trestle.core.base_model.OscalBaseModel], str]</code></td>
      <td><p>Type of Oscal Model for the provided model
Alias of that oscal model.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_relative_model_type</span><span class="p">(</span><span class="n">relative_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given the relative path of a file with respect to &#39;trestle_root&#39; return the oscal model type.</span>

<span class="sd">    Args:</span>
<span class="sd">        relative_path: Relative path of the model with respect to the root directory of the trestle workspace.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Type of Oscal Model for the provided model</span>
<span class="sd">        Alias of that oscal model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span>
            <span class="s1">&#39;Insufficient path length to be a valid relative path w.r.t trestle workspace root directory.&#39;</span>
        <span class="p">)</span>
    <span class="n">model_dir</span> <span class="o">=</span> <span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">model_relative_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="o">*</span><span class="n">relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>  <span class="c1"># catalogs, profiles, etc</span>

    <span class="k">if</span> <span class="n">model_dir</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_DIR_LIST</span><span class="p">:</span>
        <span class="n">module_name</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_DIR_TO_MODEL_MODULE</span><span class="p">[</span><span class="n">model_dir</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No valid trestle model type directory (e.g. catalogs) found for </span><span class="si">{</span><span class="n">model_dir</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

    <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
    <span class="n">full_alias</span> <span class="o">=</span> <span class="n">model_alias</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">model_relative_path</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
        <span class="n">alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">model_alias</span> <span class="o">!=</span> <span class="n">alias</span><span class="p">:</span>
            <span class="n">model_alias</span> <span class="o">=</span> <span class="n">alias</span>
            <span class="n">full_alias</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">full_alias</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">model_alias</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()[</span><span class="n">alias</span><span class="p">]</span><span class="o">.</span><span class="n">outer_type_</span>

    <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">full_alias</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_root_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_root_model" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get the root model class and alias based on the module.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the root model class and alias based on the module.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;Model&#39;</span><span class="p">):</span>
        <span class="n">model_metadata</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
        <span class="k">return</span> <span class="n">model_metadata</span><span class="o">.</span><span class="n">type_</span><span class="p">,</span> <span class="n">model_metadata</span><span class="o">.</span><span class="n">alias</span>
    <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="s1">&#39;Invalid module&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_singular_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_singular_alias</span><span class="p">(</span><span class="n">alias_path</span><span class="p">,</span> <span class="n">relative_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_singular_alias" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get the alias in the singular form from a jsonpath.</p>
<p>If contextual_mode is True and contextual_path is None, it assumes alias_path
is relative to the directory the user is running trestle from.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>alias_path</code></td>
        <td><code>str</code></td>
        <td><p>The current alias element path as a string</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>relative_path</code></td>
        <td><code>Optional[pathlib.Path]</code></td>
        <td><p>Optional relative path (w.r.t. trestle_root) to cater for relative element paths.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Alias as a string</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_singular_alias</span><span class="p">(</span><span class="n">alias_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relative_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the alias in the singular form from a jsonpath.</span>

<span class="sd">    If contextual_mode is True and contextual_path is None, it assumes alias_path</span>
<span class="sd">    is relative to the directory the user is running trestle from.</span>

<span class="sd">    Args:</span>
<span class="sd">        alias_path: The current alias element path as a string</span>
<span class="sd">        relative_path: Optional relative path (w.r.t. trestle_root) to cater for relative element paths.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Alias as a string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">alias_path</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid jsonpath </span><span class="si">{</span><span class="n">alias_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">singular_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="n">full_alias_path</span> <span class="o">=</span> <span class="n">alias_path</span>
    <span class="k">if</span> <span class="n">relative_path</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;get_singular_alias contextual mode: </span><span class="si">{</span><span class="nb">str</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">full_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_relative_model_type</span><span class="p">(</span><span class="n">relative_path</span><span class="p">)</span>
        <span class="n">first_alias_a</span> <span class="o">=</span> <span class="n">full_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">first_alias_b</span> <span class="o">=</span> <span class="n">alias_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">first_alias_a</span> <span class="o">==</span> <span class="n">first_alias_b</span><span class="p">:</span>
            <span class="n">full_model_alias</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">full_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">full_alias_path</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">full_model_alias</span><span class="p">,</span> <span class="n">alias_path</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

    <span class="n">path_parts</span> <span class="o">=</span> <span class="n">full_alias_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">ALIAS_PATH_SEPARATOR</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;path parts: </span><span class="si">{</span><span class="n">path_parts</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">model_types</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">root_model_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">module_name</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_TO_MODEL_MODULE</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_root_model</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">root_model_alias</span> <span class="o">==</span> <span class="n">model_alias</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">model_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
            <span class="k">break</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">root_model_alias</span><span class="si">}</span><span class="s1"> is an invalid root model alias.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">root_model_alias</span>

    <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># go through path parts skipping first one</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
            <span class="c1"># if it is a collection type and last part is * then break</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">path_parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c1"># otherwise get the inner type of items in the collection</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
            <span class="c1"># and bump i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_part</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">field_map</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">path_part</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field_map</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">path_part</span><span class="p">]</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">outer_type_</span>
        <span class="n">model_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>

    <span class="n">last_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">last_alias</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
        <span class="n">last_alias</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1"># generic model and not list, so return itself fixme doc</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">last_alias</span>

    <span class="n">parent_model_type</span> <span class="o">=</span> <span class="n">model_types</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field_map</span> <span class="o">=</span> <span class="n">parent_model_type</span><span class="o">.</span><span class="n">alias_to_field_map</span><span class="p">()</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">last_alias</span><span class="p">]</span>
        <span class="n">outer_type</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">outer_type_</span>
        <span class="n">inner_type</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_inner_type</span><span class="p">(</span><span class="n">outer_type</span><span class="p">)</span>
        <span class="n">inner_type_name</span> <span class="o">=</span> <span class="n">inner_type</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">singular_alias</span> <span class="o">=</span> <span class="n">str_utils</span><span class="o">.</span><span class="n">classname_to_alias</span><span class="p">(</span><span class="n">inner_type_name</span><span class="p">,</span> <span class="n">AliasMode</span><span class="o">.</span><span class="n">JSON</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in json path </span><span class="si">{</span><span class="n">alias_path</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">singular_alias</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_stripped_model_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">absolute_path</span><span class="p">,</span> <span class="n">absolute_trestle_root</span><span class="p">,</span> <span class="n">aliases_not_to_be_stripped</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_stripped_model_type" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get the stripped contextual model class and alias based on the contextual path.</p>
<p>This function relies on the directory structure of the trestle model being edited to determine, based on the
existing files and folder, which fields should be stripped from the model type represented by the
path passed in as a parameter.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_stripped_model_type</span><span class="p">(</span>
    <span class="n">absolute_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">absolute_trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">aliases_not_to_be_stripped</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the stripped contextual model class and alias based on the contextual path.</span>

<span class="sd">    This function relies on the directory structure of the trestle model being edited to determine, based on the</span>
<span class="sd">    existing files and folder, which fields should be stripped from the model type represented by the</span>
<span class="sd">    path passed in as a parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">aliases_not_to_be_stripped</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">aliases_not_to_be_stripped</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">singular_model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_relative_model_type</span><span class="p">(</span>
        <span class="n">absolute_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">absolute_trestle_root</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;singular model type </span><span class="si">{</span><span class="n">singular_model_type</span><span class="si">}</span><span class="s1"> model alias </span><span class="si">{</span><span class="n">model_alias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># Stripped models do not apply to collection types such as List[] and Dict{}</span>
    <span class="c1"># if model type is a list or dict, generate a new wrapping model for it</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_collection_field_type</span><span class="p">(</span><span class="n">singular_model_type</span><span class="p">):</span>
        <span class="n">malias</span> <span class="o">=</span> <span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="n">alias_to_classname</span><span class="p">(</span><span class="n">malias</span><span class="p">,</span> <span class="n">AliasMode</span><span class="o">.</span><span class="n">JSON</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;collection field type class name </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s1"> and alias </span><span class="si">{</span><span class="n">malias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">model_type</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="n">__base__</span><span class="o">=</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">__root__</span><span class="o">=</span><span class="p">(</span><span class="n">singular_model_type</span><span class="p">,</span> <span class="o">...</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model_type created: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span>

    <span class="n">malias</span> <span class="o">=</span> <span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;not collection field type, malias: </span><span class="si">{</span><span class="n">malias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="n">malias</span> <span class="o">!=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">absolute_path</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
        <span class="n">split_subdir</span> <span class="o">=</span> <span class="n">absolute_path</span> <span class="o">/</span> <span class="n">malias</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">split_subdir</span> <span class="o">=</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">absolute_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>

    <span class="n">aliases_to_be_stripped</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">split_subdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">iterdir_without_hidden_files</span><span class="p">(</span><span class="n">split_subdir</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_extract_alias</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aliases_not_to_be_stripped</span><span class="p">:</span>
                <span class="n">aliases_to_be_stripped</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;aliases to be stripped: </span><span class="si">{</span><span class="n">aliases_to_be_stripped</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases_to_be_stripped</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">model_type</span> <span class="o">=</span> <span class="n">singular_model_type</span><span class="o">.</span><span class="n">create_stripped_model_type</span><span class="p">(</span>
            <span class="n">stripped_fields_aliases</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">aliases_to_be_stripped</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model_type: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span>
    <span class="k">return</span> <span class="n">singular_model_type</span><span class="p">,</span> <span class="n">model_alias</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.get_title_from_model_uri" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_title_from_model_uri</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.get_title_from_model_uri" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get title from model at uri.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_title_from_model_uri</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get title from model at uri.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fetcher</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">FetcherFactory</span><span class="o">.</span><span class="n">get_fetcher</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
        <span class="n">model</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">get_oscal</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">title</span>
    <span class="k">except</span> <span class="n">TrestleError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error finding title for model at uri </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.has_no_duplicate_values_by_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_no_duplicate_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.has_no_duplicate_values_by_name" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Determine if duplicate values of type exist in object.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">has_no_duplicate_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine if duplicate values of type exist in object.&quot;&quot;&quot;</span>
    <span class="n">loe</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">find_values_by_name</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="n">name_of_interest</span><span class="p">)</span>
    <span class="n">set_loe</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">loe</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">loe</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_loe</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">loe</span><span class="p">:</span>
        <span class="n">items</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="c1"># now print items</span>
    <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">instances</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">instances</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicate detected of item </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1"> with </span><span class="si">{</span><span class="n">instances</span><span class="si">}</span><span class="s1"> instances.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.last_modified_at_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">last_modified_at_time</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.last_modified_at_time" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Generate a LastModified set to timestamp or now.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">last_modified_at_time</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a LastModified set to timestamp or now.&quot;&quot;&quot;</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="k">if</span> <span class="n">timestamp</span> <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">timestamp</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.load_distributed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_distributed</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">,</span> <span class="n">collection_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.load_distributed" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Given path to a model, load the model.</p>
<p>If the model is decomposed/split/distributed,the decomposed models are loaded recursively.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>abs_path</code></td>
        <td><code>Path</code></td>
        <td><p>The path to the file/directory to be loaded.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>abs_trestle_root</code></td>
        <td><code>Path</code></td>
        <td><p>The trestle workspace root directory.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>collection_type</code></td>
        <td><code>Optional[Type[Any]]</code></td>
        <td><p>The type of collection model, if it is a collection model.
typing.List is the only collection type handled or expected.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Type[trestle.core.base_model.OscalBaseModel], str, Union[trestle.core.base_model.OscalBaseModel, List[trestle.core.base_model.OscalBaseModel], Dict[str, trestle.core.base_model.OscalBaseModel]]]</code></td>
      <td><p>Return a tuple of Model Type (e.g. class 'trestle.oscal.catalog.Catalog'),
Model Alias (e.g. 'catalog.metadata') and Instance of the Model.
If the model is decomposed/split/distributed, the instance of the model contains
the decomposed models loaded recursively.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This does not validate the model.  You must either validate the model separately or use the load_validate
utilities.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_distributed</span><span class="p">(</span>
    <span class="n">abs_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">abs_trestle_root</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">collection_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span>
           <span class="nb">str</span><span class="p">,</span>
           <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OscalBaseModel</span><span class="p">]]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given path to a model, load the model.</span>

<span class="sd">    If the model is decomposed/split/distributed,the decomposed models are loaded recursively.</span>

<span class="sd">    Args:</span>
<span class="sd">        abs_path: The path to the file/directory to be loaded.</span>
<span class="sd">        abs_trestle_root: The trestle workspace root directory.</span>
<span class="sd">        collection_type: The type of collection model, if it is a collection model.</span>
<span class="sd">            typing.List is the only collection type handled or expected.</span>
<span class="sd">            Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Return a tuple of Model Type (e.g. class &#39;trestle.oscal.catalog.Catalog&#39;),</span>
<span class="sd">        Model Alias (e.g. &#39;catalog.metadata&#39;) and Instance of the Model.</span>
<span class="sd">        If the model is decomposed/split/distributed, the instance of the model contains</span>
<span class="sd">        the decomposed models loaded recursively.</span>

<span class="sd">    Note:</span>
<span class="sd">        This does not validate the model.  You must either validate the model separately or use the load_validate</span>
<span class="sd">        utilities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if trying to load file that does not exist, load path instead</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">abs_path</span> <span class="o">=</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">abs_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">TrestleNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File </span><span class="si">{</span><span class="n">abs_path</span><span class="si">}</span><span class="s1"> not found for load.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection_type</span><span class="p">:</span>
        <span class="c1"># If the path contains a list type model</span>
        <span class="k">if</span> <span class="n">collection_type</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_load_list</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
        <span class="c1"># the only other collection type in OSCAL is dict, and it only applies to include_all,</span>
        <span class="c1"># which is too granular ever to be loaded by this routine</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Collection type </span><span class="si">{</span><span class="n">collection_type</span><span class="si">}</span><span class="s1"> not recognized for distributed load.&#39;</span><span class="p">)</span>

    <span class="c1"># Get current model</span>
    <span class="n">primary_model_type</span><span class="p">,</span> <span class="n">primary_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
    <span class="n">primary_model_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OscalBaseModel</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># is this an attempt to load an actual json or yaml file?</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">)</span>
    <span class="c1"># if file is sought but it doesn&#39;t exist, ignore and load as decomposed model</span>
    <span class="k">if</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span> <span class="ow">and</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">primary_model_instance</span> <span class="o">=</span> <span class="n">primary_model_type</span><span class="o">.</span><span class="n">oscal_read</span><span class="p">(</span><span class="n">abs_path</span><span class="p">)</span>
    <span class="c1"># Is model decomposed?</span>
    <span class="n">decomposed_dir</span> <span class="o">=</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">abs_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">decomposed_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">aliases_not_to_be_stripped</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">instances_to_be_merged</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">local_path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">trestle</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">file_utils</span><span class="o">.</span><span class="n">iterdir_without_hidden_files</span><span class="p">(</span><span class="n">decomposed_dir</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">local_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span><span class="p">,</span> <span class="n">model_instance</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
                <span class="n">aliases_not_to_be_stripped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">instances_to_be_merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">local_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">abs_trestle_root</span><span class="p">)</span>
                <span class="c1"># Only load the directory if it is a collection model. Otherwise do nothing - it gets loaded when</span>
                <span class="c1"># iterating over the model file</span>

                <span class="c1"># If a model is just a container for a list e.g.</span>
                <span class="c1"># class Foo(OscalBaseModel):  noqa: E800</span>
                <span class="c1">#      __root__: List[Bar]    noqa: E800</span>
                <span class="c1"># You need to test whether first a root key exists</span>
                <span class="c1"># then whether the outer_type of root is a collection.</span>
                <span class="c1"># Alternative is to do a try except to avoid the error for an unknown key.</span>

                <span class="k">if</span> <span class="n">model_type</span><span class="o">.</span><span class="n">is_collection_container</span><span class="p">():</span>
                    <span class="c1"># This directory is a decomposed List or Dict</span>
                    <span class="n">collection_type</span> <span class="o">=</span> <span class="n">model_type</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">()</span>
                    <span class="n">model_type</span><span class="p">,</span> <span class="n">model_alias</span><span class="p">,</span> <span class="n">model_instance</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span>
                                                                                          <span class="n">abs_trestle_root</span><span class="p">,</span>
                                                                                          <span class="n">collection_type</span><span class="p">)</span>
                    <span class="n">aliases_not_to_be_stripped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">instances_to_be_merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>
        <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">primary_model_instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="n">primary_model_instance</span><span class="o">.</span><span class="vm">__dict__</span>

        <span class="n">merged_model_type</span><span class="p">,</span> <span class="n">merged_model_alias</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">get_stripped_model_type</span><span class="p">(</span><span class="n">abs_path</span><span class="p">,</span>
                                                                                   <span class="n">abs_trestle_root</span><span class="p">,</span>
                                                                                   <span class="n">aliases_not_to_be_stripped</span><span class="p">)</span>

        <span class="c1"># The following use of top_level is to allow loading of a top level model by name only, e.g. MyCatalog</span>
        <span class="c1"># There may be a better overall way to approach this.</span>
        <span class="n">top_level</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">merged_model_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aliases_not_to_be_stripped</span><span class="p">)):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">aliases_not_to_be_stripped</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="n">instances_to_be_merged</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;__root__&#39;</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span>
                                                                                                <span class="n">OscalBaseModel</span><span class="p">):</span>
                <span class="n">instance</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;__root__&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">top_level</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">primary_model_dict</span><span class="p">:</span>
                <span class="n">primary_model_dict</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">primary_model_dict</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>

        <span class="n">merged_model_instance</span> <span class="o">=</span> <span class="n">merged_model_type</span><span class="p">(</span><span class="o">**</span><span class="n">primary_model_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">merged_model_type</span><span class="p">,</span> <span class="n">merged_model_alias</span><span class="p">,</span> <span class="n">merged_model_instance</span>
    <span class="k">return</span> <span class="n">primary_model_type</span><span class="p">,</span> <span class="n">primary_model_alias</span><span class="p">,</span> <span class="n">primary_model_instance</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.load_model_for_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_model_for_class</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">file_content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.load_model_for_class" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Load a model by name and model class and infer file content type if not specified.</p>
<p>If you need to load an existing model but its content type may not be known, use this method.
But the file content type should be specified if it is somehow known.</p>
<p>Note:  This does not validate the model.  If you want to validate the model use the load_validate utilities.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_model_for_class</span><span class="p">(</span>
    <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">model_class</span><span class="p">:</span> <span class="n">TG</span><span class="p">,</span>
    <span class="n">file_content_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FileContentType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">TG</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a model by name and model class and infer file content type if not specified.</span>

<span class="sd">    If you need to load an existing model but its content type may not be known, use this method.</span>
<span class="sd">    But the file content type should be specified if it is somehow known.</span>

<span class="sd">    Note:  This does not validate the model.  If you want to validate the model use the load_validate utilities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span>
        <span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_class</span>
    <span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="k">if</span> <span class="n">file_content_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">file_content_type</span> <span class="o">=</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">path_to_content_type</span><span class="p">(</span><span class="n">root_model_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">FileContentType</span><span class="o">.</span><span class="n">is_readable_file</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to load model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s1"> without specifying json or yaml.&#39;</span><span class="p">)</span>
    <span class="n">full_model_path</span> <span class="o">=</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">full_model_path</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model</span><span class="p">,</span> <span class="n">full_model_path</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.load_model_for_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_model_for_type</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_type</span><span class="p">,</span> <span class="n">model_name</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.load_model_for_type" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Load model for the given type and name.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_model_for_type</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load model for the given type and name.&quot;&quot;&quot;</span>
    <span class="n">dir_name</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
    <span class="n">model_path</span> <span class="o">=</span> <span class="n">trestle_root</span> <span class="o">/</span> <span class="n">dir_name</span> <span class="o">/</span> <span class="n">model_name</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">model_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No model is found at path: </span><span class="si">{</span><span class="n">model_path</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">oscal_object</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">load_distributed</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">oscal_object</span><span class="p">,</span> <span class="n">model_path</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.model_age" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_age</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.model_age" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Find time in seconds since LastModified timestamp.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">model_age</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find time in seconds since LastModified timestamp.&quot;&quot;&quot;</span>
    <span class="c1"># default to one year if no last_modified</span>
    <span class="n">age_seconds</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">DAY_SECONDS</span> <span class="o">*</span> <span class="mi">365</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span> <span class="o">-</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span>
        <span class="n">age_seconds</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">seconds</span>
    <span class="k">return</span> <span class="n">age_seconds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.model_type_to_model_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.model_type_to_model_dir" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Get plural model directory from model type.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">model_type_to_model_dir</span><span class="p">(</span><span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get plural model directory from model type.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_LIST</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">err</span><span class="o">.</span><span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not a valid model type: </span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_TO_MODEL_DIR</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.models_are_equivalent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">models_are_equivalent</span><span class="p">(</span><span class="n">model_a</span><span class="p">,</span> <span class="n">model_b</span><span class="p">,</span> <span class="n">ignore_all_uuid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.models_are_equivalent" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Test if models are equivalent except for last modified and possibly uuid.</p>
<p>If a model has had uuids regenerated, then all uuids <em>and references to them</em> are updated.  This means that
special handling is required if a model has had uuids regenerated - when checking equivalence.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">models_are_equivalent</span><span class="p">(</span>
    <span class="n">model_a</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
    <span class="n">model_b</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TopLevelOscalModel</span><span class="p">],</span>
    <span class="n">ignore_all_uuid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test if models are equivalent except for last modified and possibly uuid.</span>

<span class="sd">    If a model has had uuids regenerated, then all uuids *and references to them* are updated.  This means that</span>
<span class="sd">    special handling is required if a model has had uuids regenerated - when checking equivalence.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uuid_type_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">common</span><span class="o">.</span><span class="n">LastModified</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">LocationUuid</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">PartyUuid</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">RelatedRisk</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">Source</span><span class="p">,</span>
        <span class="n">assessment_plan</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
        <span class="n">assessment_results</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
        <span class="n">poam</span><span class="o">.</span><span class="n">RelatedObservation</span><span class="p">,</span>
        <span class="n">poam</span><span class="o">.</span><span class="n">RelatedObservation1</span>
    <span class="p">]</span>
    <span class="n">type_list</span> <span class="o">=</span> <span class="n">uuid_type_list</span> <span class="k">if</span> <span class="n">ignore_all_uuid</span> <span class="k">else</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">LastModified</span><span class="p">]</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_objects_differ</span><span class="p">(</span><span class="n">model_a</span><span class="p">,</span> <span class="n">model_b</span><span class="p">,</span> <span class="n">type_list</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;last_modified&#39;</span><span class="p">],</span> <span class="n">ignore_all_uuid</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.parameter_to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">partial</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.parameter_to_dict" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Convert obj to dict containing only string values, storing only the fields that have values set.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Union[trestle.core.base_model.OscalBaseModel, str]</code></td>
        <td><p>The parameter or its consituent parts in recursive calls</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>partial</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to convert the entire param or just the parts needed for markdown header</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[str, Dict[str, Any]]</code></td>
      <td><p>The converted parameter as dictionary, with values as None if not present</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">parameter_to_dict</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OscalBaseModel</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">partial</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert obj to dict containing only string values, storing only the fields that have values set.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The parameter or its consituent parts in recursive calls</span>
<span class="sd">        partial: Whether to convert the entire param or just the parts needed for markdown header</span>

<span class="sd">    Returns:</span>
<span class="sd">        The converted parameter as dictionary, with values as None if not present</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_parameter_to_dict_recurse</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">partial</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.regenerate_uuids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">regenerate_uuids</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.regenerate_uuids" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Regenerate all uuids in object and update corresponding references.</p>
<p>Find all dicts with key == 'uuid' and replace the value with a new uuid4.
Build a corresponding lookup table as you go, of old:new uuid values.
Then make a second pass through the object and replace all string values
present in the lookup table with the new value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>object_of_interest</code></td>
        <td><code>Any</code></td>
        <td><p>pydantic.BaseModel, list, dict or str will be updated</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>The updated object with new uuid&#39;s and refs
The final lookup table of old</code></td>
      <td><p>new uuid's
A count of the number of refs that were updated</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">regenerate_uuids</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Regenerate all uuids in object and update corresponding references.</span>

<span class="sd">    Find all dicts with key == &#39;uuid&#39; and replace the value with a new uuid4.</span>
<span class="sd">    Build a corresponding lookup table as you go, of old:new uuid values.</span>
<span class="sd">    Then make a second pass through the object and replace all string values</span>
<span class="sd">    present in the lookup table with the new value.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_of_interest: pydantic.BaseModel, list, dict or str will be updated</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated object with new uuid&#39;s and refs</span>
<span class="sd">        The final lookup table of old:new uuid&#39;s</span>
<span class="sd">        A count of the number of refs that were updated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_regenerate_uuids_in_place</span><span class="p">(</span><span class="n">object_of_interest</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">new_object</span><span class="p">,</span> <span class="n">n_refs_updated</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_update_new_uuid_refs</span><span class="p">(</span><span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_object</span><span class="p">,</span> <span class="n">uuid_lut</span><span class="p">,</span> <span class="n">n_refs_updated</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.save_top_level_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_top_level_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">file_content_type</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.save_top_level_model" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Save a model by name and infer model type by inspection.</p>
<p>You don't need to specify the model type (catalog, profile, etc.) but you must specify the file content type.
If the model directory does not exist, it is created.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">save_top_level_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">trestle_root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_content_type</span><span class="p">:</span> <span class="n">FileContentType</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a model by name and infer model type by inspection.</span>

<span class="sd">    You don&#39;t need to specify the model type (catalog, profile, etc.) but you must specify the file content type.</span>
<span class="sd">    If the model directory does not exist, it is created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root_model_path</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">_root_path_for_top_level_model</span><span class="p">(</span><span class="n">trestle_root</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
    <span class="n">full_model_path</span> <span class="o">=</span> <span class="n">root_model_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">FileContentType</span><span class="o">.</span><span class="n">to_file_extension</span><span class="p">(</span><span class="n">file_content_type</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">full_model_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">full_model_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">oscal_write</span><span class="p">(</span><span class="n">full_model_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.common.model_utils.ModelUtils.update_last_modified" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_last_modified</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.common.model_utils.ModelUtils.update_last_modified" class="headerlink" title="Permanent link">¤</a></h6>

    <div class="doc doc-contents ">

      <p>Update the LastModified timestamp in top level model to now.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/common/model_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">update_last_modified</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">TopLevelOscalModel</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the LastModified timestamp in top level model to now.&quot;&quot;&quot;</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="k">if</span> <span class="n">timestamp</span> <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">last_modified</span> <span class="o">=</span> <span class="n">timestamp</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>

<p>handler: python</p>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>